# This is a basic workflow to help you get started with Actions

name: Download and Upload Artifact

on:
  workflow_dispatch:

jobs:
  download-upload-artifact:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout target repository
      uses: actions/checkout@v2
      with:
        token: ${{ secrets.TARGET_REPO_TOKEN }}

    - name: Download artifact from source repository
      run: |
        echo "Downloading artifact from source repository"
        curl -H "Authorization: token ${{ secrets.MY_TEST_PAT }}" \
             -H "Accept: application/vnd.github.v3+json" \
             -L \
             -o artifact.zip \
             https://api.github.com/repos/HipoTech/test_repo1/actions/artifacts/artifact/zip

    - name: Extract artifact
      run: |
        echo "Extracting artifact"
        unzip artifact.zip -d extracted_artifact

    - name: Log directory
      run: |
        ls -R ./
